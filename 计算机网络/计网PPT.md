# 计算机网络概述

## 1.1 计算机网络概念

### 计算机网络定义

计算机网络是指将地理网络不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件、网络通信协议的管理和协调下，实现资源共享和信息传输的计算机系统

### 计算机网络组成

资源子网

提供共享的软件资源和硬件资源

通信子网

提供信息交换的网络节点和通信线路

### 计算机网络的类型

#### 按拓扑结构分类

星型、总线型、树形、环形、网状

#### 按照范围分类

局域网LAN、广域网WAN、城域网MAN、互联网Internal、个人区域网PAN

#### 按传输方式分类

有线网络

无线网络

## 1.2 计算机网络体系结构

### 1.2.1 传输方式

#### 按传输方向

单工：只能单方面收到信号。收音机

双工：同一时间内只允许一个方向的数据通过，例如对讲机

全双工：双方向可以同时通信

#### 按传输对象

单播：1对1

多播：1对多

广播：1对all

### 1.2.2 数据交换（三种）

电路交换：占用信道，电话线

报文交换：整个报文发送给相邻结点，全部存储起来，查找转发表，再转发到下一个节点

分组交换：将一个报文分成多个组，存储起来，查找转发表，再转发到下一个节点

### 1.2.3 通信协议和体系结构

#### 网络协议三要素

语法语义时序

#### OSI参考模型

应用层

表示层

会话层

传输层

网络层

数据链路层

物理层

#### TCP参考模型

应用层

传输层

网络层

数据链路层

物理层

# 2 物理层

## 2.1 基本概念

### 2.1.1 四大特性

机械特性：接口是怎样的（长相）

电气特性：电压等

功能特性：传输什么信号，例如光纤传输光信号，双绞线传输电信号

过程特性：实现不同功能所发射信号的顺序（高级功能）

### 2.1.2 两种信号

模拟信号：特定频段的信号，有丰富的表现形式，容易受到干扰

数字信号：不是1 就是0，离散，不连续，不容易受到干扰

### 2.1.3 调制和编码

#### 调制

模拟信号转换

#### 编码

数字信号转换

##### 编码的步骤

采样、量化和编码

#### 区别

数据通过编码转换为数字信号

通过调制转换为模拟信号

### 2.1.4 传输介质

导向与非导向

##### 双绞线（分类及缩写）

屏蔽双绞线 STP      能力强

非屏蔽双绞线 UTP 抗干扰能力差

制作标准 568A 568B

##### 光纤（分类-两类）

多模光纤：在给定波长上，能以多个模式同时传输

单模光纤：只有一个角度的光纤可以通过，专一、传输距离远

##### 同轴电缆

##### 无线

### 2.1.5 三大部分

原系统

传输系统

目的系统

## 2.2 物理层基本通话技术

### 2.2.1 四种信道复用技术

复用：将多种不同的信号在统一信道上的传输。复用技术主要区分不同的信号

**频分复用**

Frequency Division Multiplexing，FDM

利用不同的载波频率传送不同的输入信号

频分复用是所有用户在同样的时间占用不同的频带资源。

**时分复用**

Time Division Multiplexing，TDM

划分不同的时间端来传送信号

**波分复用**

光的频分复用。用一根光纤来同时传输多个频率的光载波信号。

**码分复用**

Code Division Multiple Access，CMDA

在同一时间统一频率根据传输的数据码区分

### 2.2.2 数据传输方式

传输方向：单工、双工、全双工

传输对象：单播、组播、广播

#### 根据同时间传输数量分为

串行传输

排队依次传输

并行传输

一次性一组传输

#### 根据数据包文双方的行为

同步传输：一次性

异步传输：发送方可以在任何时候发送，接收方也不知道他们会在什么时候到达

#### 根据传输信号

基带传输

频带传输

# 3 数据链路层

## 3.1 数据链路层基础概念

在物理层和网络层之间的协议，提供相邻结点的可靠传输



## 3.2 帧的概念

数据链路层的协议数据单元

### 组成

帧头：源MAC地址、目的MAC地址、类型 

> MAC地址：网卡的地址，48位，独一无二

数据 

帧尾：校验（CRC校验码-确保可靠传输）

## 3.3 以太网数据帧中的MAC和LLC

基于IEE802.3的帧格式

数据链路层分为MAC和LLC两个部分

### MAC

#### 访问方式？

MAC介质控制访问

对接物理层，下层

### LLC

#### 访问方式？

LLC逻辑控制访问

对接网络层，上层

## 3.4 数据链路层的两种传播方式

单播、广播

体现在PPP协议

> PPP协议：为点对点串行线路上传送网络层分组而设计的数据链路层协议。
>
> PPP是用户计算机和ISP进行通信时所使用的数据链路层协议。  

## 3.5 数据链路层的三个基本问题

封装成帧（PPP协议）、透明传输、

差错检验（CRC、奇数校验、偶数校验）

> 奇数校验、偶数校验：
>
> 是数据传送时采用一种矫正数据错误的一种方式，根据被传输的一组二进制代码中的数位中“1”的奇偶个数来校验

## 3.6 局域网中的设备

集线器（Hub）

​		工作在物理层，对接收到的信号进行加强和重组，以扩大网络传输距离。

交换机（Switch）

​		工作在数据链路层，位网络提供接口。存储并转发以太网帧。当帧在网段上转发时，检查帧首部并基于MAC首地址，选择性地向一个或多个出路转发帧

​	交换机将子网划分为多个段，每一个段都是一个冲突域

集线器共享带宽，交换机独享带宽

网桥

两个端口之间的交换机，工作在链路层的一种网络互联设备

### STP

Spanning Tree Protocol，生成树协议，网桥到网桥的协议

#### 目的

目的是维护一个无回路的网络

当交换机发现一个拓扑回路时，它们会自动在逻辑上阻塞一个或多个冗余端口，从而获得无回路拓扑。 

## 3.2 数据链路层通信协议

### 冲突域和广播域

冲突域：交换机的每一个端口都是一个冲突域，冲突域只能发生在一个网段

广播域：每一个交换机下是一个广播域

### 虚拟局域网-VLAN

将一个局域网划分为多个局域网

优点：

1. 划分广播域，减少垃圾数据
2. 增加隔离，提高安全性，健壮性
3. 灵活构建工作组

#### Access and Trunk Links

##### 访问链路Access Links

一条访问链路是指连接到交换机上的一条链路，它只属于一个VLAN， 这条链路将某个设备与交换机的一个端口连接起来，但该设备完全没有察觉到一个VLAN 的存在。

##### 干道链路Trunk Link

干道链路与访问链路不同的是，干道链路可以支持多个VLAN，但它并不属于一个特定的VLAN。

干道链路用于交换机与另一个交换机、或路由器、或服务器之间的连接。

#### 划分VLAN的方式（五种）

可以是事先固定的，被称为“静态VLAN”，也可以是根据所连的计算机而动态改变设定。被称为 “动态VLAN”。

基于端口       

也称为静态VLAN。形成静态VLAN的过程就是将端口强制性的分配给VLAN的过程。                                                                                                                                                                                                                                                                                                                                                                         

基于子网

基于MAC地址

也称为动态VLAN。根据每个主机的MAC 地址来划分，即对每个MAC地址的主机都配置他属于哪个组。

基于协议

基于匹配策略

### CSMA/MD

载波监听，多点接入、碰撞检测

Carrier Sense Multiple Access with Collision Detection

#### 四大要点（重点）

先听后发、边听边发、冲突停止、延迟后发

#### 争用期

能够检测到冲突的最晚时间

以太网单程端到端传播时延：t

2t：端到端往返时延，称为争用期

传统以太网（10 Mbps）的2t=51.2 微秒

以太网最短帧长=争用期（2t）*带宽

退避时间=基本退避时间（2t）*随机数r{0, 1, ....., 2^k-1}

k=min{重传次数, 10}

### PPP

点对点通信是一对一通信，因此不会发生碰撞。

### CRC-循环冗余校验



# 4 网络层

## 4.1 网络层作用

提供点到点的服务。具体功能包括寻址和路由选择、连接的建立、保持和终止

基本单位：数据报

> 物理层：比特
>
> 链路层：帧
>
> 网络层：数据报
>
> 传输层：报文段
>
> 应用层：报文

## 4.2 网络层协议IP

### ARP

地址解析协议

根据IP地址获取物理地址

### RARP

反地址解析协议

### ICMP

网际控制报文协议

通过ICMP传输控制信息，控制信息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。例如ping命令



### IGMP

提供分组方式



## IP地址

![image-20230223163849379](/home/erfenjiao/.config/Typora/typora-user-images/image-20230223163849379.png)

### 概念

屏蔽物理地址的差异，是逻辑地址。MAC地址为物理地址

### 组成

网络地址：标识网段

主机地址：标识某一台设备

#### 子网掩码

用于区分网络号和主机号

从一个 I P数据报的首部并无法判断源主机或目的主机所连接的网络是否进行了子网的划分。使用子网掩码(subnet mask)可以找出 IP 地址中的子网部分。  

### 数据报格式

首部+数据

### 分类（五类）

A类

B类

C类

D类

E类

特殊地址

1）回环测试地址     

主机将IP数据报回传自身的地址      

——IP地址第一个字节为127  

例：      回送地址为127.0.0.1

2）**网络地址**     主机地址部分全部定义为“0”     用于区分网络 

例：     主机             212.111.44.136     

所在网络的地址为   212.111.44.0

3）广播地址   

①直接广播地址     主机地址部分为全“1”     

用于向某个网络的所有主机广播   

例：      

•主机                              212.111.44.136      

•所在网络的广播地址为212.111.44.255

### 无分类编址CIDR

整个 IPv4 的地址空间最终将全部耗尽

无分类域间路由选择 CIDR (Classless Inter-Domain Routing)。  

![image-20230223205407913](/home/erfenjiao/.config/Typora/typora-user-images/image-20230223205407913.png)

### NAT

一个单位可以使用专用地址对内部主机进行寻址，然后使用NAT访问Internet。这样做主机可以连接到Internet，但并不需要消耗地址空间。  	   

NAT完成在专用地址和Internet中注册地址之间的转换。

NAT地址转换方法：       

- 静态转换 ：明确配置
- 动态转换  
- 超载NAT：使用地址超载，数以百计的专用地址节点可以使用一个全球地址访问Internet。

### ARP

为什么要将IP 地址转换为硬件地址? 

不管网络层使用的是什么协议，在实际网络的链路上传送数据帧时，最终还是必须使用硬件地址。





逆地址解析协议 **RARP** 使只知道自己硬件地址的主机能够知道其 IP 地址。这种主机往往是无盘工作站。 因此 RARP协议目前已很少使用。 

### ICMP

为了提高 IP 数据报交付成功的机会，在网际层使用了因特网控制报文协议 ICMP (Internet Control Message Protocol)。

ICMP 允许主机或路由器报告差错情况和提供有关异常情况的报告。

ICMP 不是高层协议，而是 IP 层的协议。

ICMP 报文作为 IP 层数据报的数据，加上数据报的首部，组成 IP 数据报发送出去。

IPv6



## 子网划分（重要大题）

子网掩码

A 255.0.0.0

B 255.255.0.0

C 255.255.255.0

D 255.255.255.255

子网划分：通过修改子网掩码，更精细的划分主机号和网络号

### 技术：

VLSM（可变长子网掩码）

为了更有效的使用无类别域间路由（CIDR）和路由汇聚（route summary）来控制路由表大小，是网络管理员



题目：给出IP地址和子网掩码，求网段



## 网络层路由

路由器维护连接状态信息







# 传输层

## 概念

端口

### FTP

21-连接（20-传输数据）

### TELNET

远程登录-23

### SMTP

电子邮件传输协议-25

POP3（邮局协议版本）-110

### DNS

域名系统-53

### TFTP

简单文件传输协议-69

### HTTP

80

### SNMP

简单网络管理协议-161

### HTTPS

443



## 两个重要协议

### TCP 

面向连接、可靠服务、字节流、全双工

#### 窗口

##### 固定窗口



##### 滑动窗口





### UDP







PPT一些

CH4 数据报服务和虚电路服务？对比？
